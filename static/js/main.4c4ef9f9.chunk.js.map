{"version":3,"sources":["features/gaol/gaolAdapter.js","config/regex.js","features/gaol/gaolService.js","plugins/localForage/index.js","features/gaol/gaolAPI.js","features/gaol/gaolSlice.js","features/gaol/Gaol.js","utils/xml-js.js","components/UI/CharacterRow.js","config/party.js","components/UI/PartyPanel.js","components/UI/About.js","components/UI/ImXExport.js","pages/Setting.js","App.js","app/store.js","index.js"],"names":["tts","msg","a","call","createMessage","window","callOverlayHandler","console","error","type","key","data","config","gaolRegex","nameRegex","testRegex","testNameRegex","regex","RegexConfig","regexTest","getPlayerFromRaw","players","rawLine","i","findIndex","name","includes","sortByASC","b","getNameFromRaw","match","testMatch","split","pop","store","localForage","updateUserConfig","Promise","resolve","reject","local","setItem","initialState","number","gaoledPlayers","myNumber","nog","status","fetchUserConfig","createAsyncThunk","getItem","gaol","gaolSlice","createSlice","reducers","order","state","action","payload","form","position","appendGaoledPlayer","iplayer","gaoled","filter","gp","timestamp","lte","Date","getTime","duplicate","undefined","find","newItem","log","resetGaoledPlayer","extraReducers","builder","addCase","pending","fulfilled","actions","selectNumber","selectMyNumber","selectPlayers","selectError","orderGaol","dispatch","getState","length","me","arr","map","sort","e","gaolService","gaolAdaper","setTimeout","updateConfig","updateUserConfigAPI","useStyles","makeStyles","theme","root","display","justifyContent","padding","background","alpha","msgRoot","flexDirection","fontSize","color","palette","success","main","timer","paper","spacing","textAlign","text","secondary","Gaol","useSelector","errorMsg","classes","useDispatch","useEffect","listeners","event","gaolEvent","forEach","listener","addOverlayListener","startOverlayEvents","gaolConnect","removeOverlayListener","gaolDisconnect","useCallback","str","test","then","updateGaol","Paper","className","variant","elevation","Typography","date","now","intervalDelay","precision","renderer","props","seconds","milliseconds","IconButton","size","onClick","querystring","String","location","search","joiner","indexOf","href","open","openWindowSetting","array2PriorityJsonXML","json","declaration","attributes","version","encoding","standalone","elements","playerElements","item","push","characterRow","no","marginRight","CharacterRow","selectMe","index","onChangeSelectMe","onTextInput","removeHandle","hiddenAction","component","Radio","checked","value","onChange","TextField","id","label","target","max","fullParty","lightParty","actionDiv","marginTop","cancelBtn","margin","dnone","PartyPanel","React","useState","isReset","setIsReset","anchorEl","setAnchorEl","importFile","useRef","tempExportLink","handleMenuClose","removeMemberHandle","p","pi","onClickExport","jsonXML","utilConvert","xml","convert","file","Blob","blob","callback","fileReader","FileReader","onload","result","readAsDataURL","blobToDataURL","url","current","innerText","download","click","onInput","nplayers","v","saveConfig","alert","partyType","Config","getPartyType","menuList","title","icon","disabled","Card","style","paddingBottom","CardHeader","currentTarget","titleTypographyProps","subheader","Menu","keepMounted","Boolean","onClose","obj","MenuItem","ListItemIcon","ListItemText","primary","CardContent","n","Button","prev","ref","stopPropagation","preventDefault","files","reader","readAsText","About","spaceTop","Link","underline","ImXExport","setText","importInput","width","exportHandle","gaolUserConfig","encrypt","LZString","compressToEncodedURIComponent","multiline","rows","decompressFromEncodedURIComponent","TabPanel","children","other","role","hidden","Box","a11yProps","Setting","useTheme","default","height","setValue","AppBar","Tabs","newValue","indicatorColor","textColor","Tab","onChangeIndex","dir","direction","App","exact","path","configureStore","reducer","gaolReducer","createTheme","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","document","getElementById"],"mappings":"6YA2BaA,EAAG,uCAAG,WAAOC,GAAP,eAAAC,EAAA,sEAETC,EAAOC,EAAc,MAAO,OAAQH,GAF3B,SAGTI,OAAOC,mBAAmBH,GAHjB,iCAIR,GAJQ,uCAMfI,QAAQC,MAAR,MANe,mBAOR,GAPQ,yDAAH,sDAWHJ,EAAgB,SAACK,EAAMC,EAAKC,GAAU,IAAD,EAMhD,OALU,GACRR,KAAMM,GADE,cAEPC,EAAMC,GAFC,oBAGRD,GAHQ,qBAGHC,GAHG,GC/BGC,EAPA,CACXC,UAAW,gCACXC,UAAW,iCACXC,UAAW,mBACXC,cAAe,oBCHbC,EAAQC,EAAYL,UACpBM,EAAYD,EAAYH,UACxBD,EAAYI,EAAYJ,UACxBE,EAAgBE,EAAYF,cAiBrBI,EAAmB,SAACC,EAASC,GACxC,IAAMC,EAAIF,EAAQG,WAAU,SAAAC,GAAI,OAAIH,EAAQI,SAASD,MACrD,MAAO,CAACF,EAAGA,GAAK,IAWLI,EAAY,SAACzB,EAAG0B,GAAJ,OAAU1B,EAAI0B,GAE1BC,EAAiB,SAACP,GAC7B,IAAIQ,EAAQR,EAAQQ,MAAMhB,GACtBiB,EAAYT,EAAQQ,MAAMd,GAC9B,OAAIc,EACWA,EAAM,GAAGE,MAAM,KAAKC,MAExBF,EACIA,EAAU,GAAGC,MAAM,KAAKC,MAGhC,M,gCCzCMC,E,OAJDC,eAA2B,CACrCV,KAAM,gBCUH,SAASW,EAAiBxB,GAC/B,OAAO,IAAIyB,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,SAAArC,EAAA,+EAETsC,EAAMC,QAAQ,OAAd,eAA2B7B,IAFlB,OAGf0B,GAAQ,GAHO,+CAKfC,EAAO,EAAD,IALS,wDAAZ,yDCTT,IAAMG,EAAe,CACnBC,QAAS,EACTtB,QAAS,GACTuB,cAAe,GACfC,UAAW,EACXC,IAAK,EACLC,OAAQ,QACRvC,MAAO,IAUIwC,EAAkBC,YAC7B,uBAD6C,sBAE7C,4BAAA/C,EAAA,sEDrBO,IAAImC,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,eAAArC,EAAA,+EAEIsC,EAAMU,QAAQ,QAFlB,OAETC,EAFS,OAGfb,EAAQa,GAAQ,IAHD,gDAKfZ,EAAO,EAAD,IALS,yDAAZ,yDCqBP,cACQ3B,EADR,yBAGSA,GAHT,4CAOWwC,EAAYC,YAAY,CACnC5B,KAAM,OACNiB,eAEAY,SAAU,CACRC,MAAO,SAACC,EAAOC,GACbD,EAAMb,OAASc,EAAOC,SAExBC,KAAM,SAACH,EAAOC,GACZD,EAAMnC,QAAUoC,EAAOC,SAEzBE,SAAU,SAACJ,EAAOC,GAChBD,EAAMX,SAAWY,EAAOC,SAE1BlD,MAAO,SAACgD,EAAOC,GACbD,EAAMhD,MAAQiD,EAAOC,SAEvBG,mBAAoB,SAACL,EAAOC,GAC1B,IAAMK,EAAWL,EAAOC,QAKlBK,EAASP,EAAMZ,cAAcoB,QAAO,SAAAC,GAAE,OAvChCC,EAuC8CD,EAAGE,OAvCnC,IAAIC,MAAOC,UAAYH,GAAtC,IAACA,KAyCNI,OAA0DC,IAA9CR,EAAOS,MAAK,SAAAP,GAAE,OAAIA,EAAGH,UAAYA,KAC7CW,EAAU,CAAEX,UAASK,KAAK,IAAIC,MAAOC,UAAY,KACvDb,EAAMZ,cAAiB0B,EAAmCP,EAApC,sBAAiBA,GAAjB,CAAyBU,IAC3CH,GACF/D,QAAQmE,IAAI,2BAA4BZ,IAG5Ca,kBAAmB,SAACnB,GAClBA,EAAMZ,cAAgB,KAK1BgC,cAAe,SAACC,GACdA,EACGC,QAAQ9B,EAAgB+B,SAAS,SAACvB,GACjCA,EAAMT,OAAS,aAEhB+B,QAAQ9B,EAAgBgC,WAAW,SAACxB,EAAOC,GAC1CD,EAAMT,OAAS,QACfS,EAAMnC,QAAUoC,EAAOC,QAAQrC,SAAWmC,EAAMnC,QAChDmC,EAAMX,cAAuC0B,IAA5Bd,EAAOC,QAAQb,SAAyBY,EAAOC,QAAQb,SAAWW,EAAMX,eAK1F,EAAgFO,EAAU6B,QAAlF1B,EAAR,EAAQA,MAAOI,EAAf,EAAeA,KAAMC,EAArB,EAAqBA,SAAUpD,EAA/B,EAA+BA,MAAOqD,EAAtC,EAAsCA,mBAAoBc,EAA1D,EAA0DA,kBAKpDO,EAAe,SAAC1B,GAAD,OAAWA,EAAML,KAAKR,QACrCwC,EAAiB,SAAC3B,GAAD,OAAWA,EAAML,KAAKN,UACvCuC,EAAgB,SAAC5B,GAAD,OAAWA,EAAML,KAAK9B,SAEtCgE,GAAc,SAAC7B,GAAD,OAAWA,EAAML,KAAK3C,OAgCpC8E,GAAY,kBAAM,SAACC,EAAUC,GACxC,IAAM5C,EAAoC4C,IAlCQrC,KAAKP,cAmCvD,GAA6B,IAAzBA,EAAc6C,OAAc,CAC9B,IACA,EHpG4B,SAACC,EAAI3B,GACnC,IAAIR,EACAoC,EAAM5B,EAAO6B,KAAI,SAAArE,GAAC,OAAIA,KAG1B,OAFAoE,EAAIE,KAAKlE,GAEF,CADP4B,EAAQoC,EAAInE,WAAU,SAAAsE,GAAC,OAAIA,IAAMJ,KAAM,EACxBnC,GAAS,GG+FPwC,CADEZ,EAAeK,KACsB5C,EAAcgD,KAAI,SAAA3B,GAAE,OAAIA,EAAGH,YAA5EnB,EAAL,oBACApC,QAAQmE,IAAI,IAAIN,KAAQxB,EAAeD,GAIvCqD,EADYrD,GAAU,uBAGtBsD,YAAW,WACTV,EAASZ,KACTY,EAAShC,GAAO,MACf,KACHgC,EAAShC,EAAMZ,OAINuD,GAAe,SAAC,GAAD,IAAG7E,EAAH,EAAGA,QAAH,IAAYwB,gBAAZ,MAAuBH,EAAaG,SAApC,gDAAmD,WAAO0C,GAAP,SAAArF,EAAA,sEACvEiG,EAAoB,CAAE9E,UAASwB,aADwC,2CAAnD,uDAIbO,KAAf,Q,iBC/HMgD,GAAYC,aAAW,SAACC,GAC5B,MAAO,CACLC,KAAM,CACJC,QAAS,OACTC,eAAgB,gBAChBC,QAAS,UACTC,WAAYC,YAAM,UAAW,KAI/BC,QAAS,CACPL,QAAS,OACTM,cAAe,SACfL,eAAgB,UAElBxG,IAAK,CACH8G,SAAU,OAEZxD,MAAO,CACLyD,MAAOV,EAAMW,QAAQC,QAAQC,MAE/BC,MAAO,CACLL,SAAU,QAEZM,MAAO,CACLX,QAASJ,EAAMgB,QAAQ,GACvBC,UAAW,SACXP,MAAOV,EAAMW,QAAQO,KAAKC,eAoFjBC,OA/Ef,WACE,IAAM/E,EAASgF,YAAYzC,GACrB0C,EAAWD,YAAYtC,IACvBwC,EAAUzB,KACVb,EAAWuC,cAEjBC,qBAAU,WACRxC,EAASvC,KACT,IAAMgF,EAAY,CAChB,CAAEvG,KAAM,UAAWwG,MAAOC,IAG5B,ON7DmB,SAACF,GACtB,IACEA,EAAUG,SAAQ,SAAAC,GAChB/H,OAAOgI,mBAAmBD,EAAS3G,MAAM,SAACqE,GAAD,OAAOsC,EAASH,MAAMnC,SAEjEzF,OAAOiI,qBACP/H,QAAQmE,IAAI,0BACZ,MAAOoB,GACPvF,QAAQC,MAAM,kCACdD,QAAQC,MAAMsF,IMmDdyC,CAAYP,GACL,kBNhDe,SAACA,GACzB,IACEA,EAAUG,SAAQ,SAAAC,GAChB/H,OAAOmI,sBAAsBJ,EAAS3G,MAAM,SAACqE,GAAD,OAAOsC,EAASH,MAAMnC,SAEpEvF,QAAQmE,IAAI,0BACZ,MAAOoB,GACPvF,QAAQC,MAAM,kCACdD,QAAQC,MAAMsF,IMwCD2C,CAAeT,MAC3B,IAEH,IAAME,EAAYQ,uBAAY,SAAC/H,GAC7B,IJ/CsBgI,EI+CdrH,EAAYX,EAAZW,SJ/CcqH,EIgDKrH,EJhDGL,EAAM2H,KAAKD,IAAQxH,EAAUyH,KAAKD,KIiDhEpD,EAASvC,KAAmB6F,MAAK,WAC/BtD,EDmCoB,SAACjE,GAAD,OAAa,SAACiE,EAAUC,GAChD,IAAQ3D,EAAqCkE,EAE7C,EAF6CA,EAC7BX,EAAcI,KACiBlE,GAA/C,mBAAOC,EAAP,KACA,GADA,KAWAgE,EAAS1B,EAAmBtC,IAC5BgE,EAASD,UAXT,CACEC,EAASZ,KACT,IAAMlD,EAAOI,EAAeP,GACxBG,IACF8D,EAAS/E,EAAM,GAAD,OAAIiB,EAAJ,0BACdwE,YAAW,kBAAMV,EAAS/E,EAAM,OAAM,QC5C7BsI,CAAWxH,SAErB,IA0BH,OACE,gBAACyH,EAAA,EAAD,CAAOC,UAAWnB,EAAQtB,KAAM0C,QAAQ,WAAWC,UAAW,EAA9D,UACE,uBAAKF,UAAWnB,EAAQhB,QAAxB,UACE,gBAACsC,EAAA,EAAD,CAAYF,QAAQ,IAApB,kBAEE,sCACA,eAACE,EAAA,EAAD,CAAYF,QAAQ,YAAYD,UAAWnB,EAAQtE,MAAOiD,QAAQ,SAAlE,SApBF7D,GAAU,EACLA,GAAU,sBAEZ,QAkBD,sCAdFA,GAAU,GAgBN,eAAC,IAAD,CACEyG,KAAMhF,KAAKiF,MAAQ,IACnBC,cAAe,EACfC,UAAW,EACXC,SAAU,SAAAC,GAAK,OACb,eAACN,EAAA,EAAD,CAAYF,QAAQ,YAAYD,UAAWnB,EAAQT,MAAOZ,QAAQ,SAAlE,mBACMiD,EAAMC,QADZ,YACuBD,EAAME,sBAMrC,eAACR,EAAA,EAAD,CAAYF,QAAQ,QAAQD,UAAWnB,EAAQ5H,IAAK+G,MAAM,QAA1D,SAAmEY,GAAY,QAEjF,+BACE,eAACgC,EAAA,EAAD,CAAY,aAAW,UAAUC,KAAK,QAAQC,QAAS,kBA/CnC,WACxB,IAAIC,EAAcC,OAAO3J,OAAO4J,SAASC,QACrCC,GAAwC,IAA9BJ,EAAYK,QAAQ,KAAe,IAAM,IACvDL,EAAW,UAAMA,GAAN,OAAoBI,GAC/B,IAAIE,EAAOhK,OAAO4J,SAASI,KAC3BhK,OAAOiK,KAAP,UAAeD,EAAf,YAA+B,GAAI,gDA0C8BE,IAA7D,SACE,eAAC,IAAD,Y,2PC1GGC,GAAwB,SAAC7E,GACpC,IAAI8E,EAfO,CACTC,YAAa,CACXC,WAAY,CACVC,QAAS,MACTC,SAAU,QACVC,WAAY,QAGhBC,SAAU,IAQRC,EAAiBrF,EAAIC,KAAI,SAAAqF,GAC3B,MAAO,CACLxK,KAAM,UACNgB,KAAM,SACNsJ,SAAU,CAAC,CAAEtK,KAAM,OAAQ+G,KAAMyD,QAQrC,OALAR,EAAKM,SAASG,KAAK,CACjBzK,KAAM,UACNgB,KAAM,WACNsJ,SAAUC,IAELP,G,yCCvBHrE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC6E,aAAc,CACZ3E,QAAS,OACTC,eAAgB,gBAChBC,QAAS,WAEX0E,GAAI,CACFC,YAAa,WAuBFC,OAnBf,YAAkH,IAAD,IAAzF7J,YAAyF,MAAlF,GAAkF,EAA9E8J,EAA8E,EAA9EA,SAAUC,EAAoE,EAApEA,MAAOC,EAA6D,EAA7DA,iBAAkBC,EAA2C,EAA3CA,YAAaC,EAA8B,EAA9BA,aAAcC,EAAgB,EAAhBA,aAEzF/D,EAAUzB,KAChB,OACE,uBAAK4C,UAAWnB,EAAQsD,aAAxB,UACE,iCACE,eAAChC,EAAA,EAAD,CAAYH,UAAWnB,EAAQuD,GAAInC,QAAQ,QAAQ4C,UAAU,OAA7D,SAAqEL,EAAQ,IAC7E,eAACM,GAAA,EAAD,CAAOjC,KAAK,QAAQkC,QAASR,IAAaC,EAAOQ,MAAOR,EAAOS,SAAU,kBAAMR,EAAiBD,MAChG,eAACU,GAAA,EAAD,CAAWC,GAAG,gBAAgBC,MAAM,iBAAiBJ,MAAOvK,EAAMhB,KAAK,OAAOwI,QAAQ,WAAWY,KAAK,QAAQoC,SAAU,SAACnG,GAAD,OAAO4F,EAAY5F,EAAEuG,OAAOL,MAAOR,UAE3JI,GACA,eAAChC,EAAA,EAAD,CAAY,aAAW,SAAS5C,MAAM,YAAY6C,KAAK,QAAQC,QAAS,kBAAM6B,EAAaH,IAA3F,SACE,eAAC,KAAD,UCvBK5K,GAPA,CACX0L,IAAK,CACDC,UAAW,EACXC,WAAY,IC2BdpG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCmG,UAAW,CACTjG,QAAS,OACTC,eAAgB,WAChBiG,UAAW,IAEbC,UAAW,CACTC,OAAQ,YAEVC,MAAO,CACLrG,QAAS,YAyMEsG,OApMf,WACE,MAA8BC,IAAMC,UAAS,GAA7C,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCH,IAAMC,SAAS,MAA/C,mBAAOG,EAAP,KAAiBC,EAAjB,KACMC,EAAaN,IAAMO,OAAO,MAC1BC,EAAiBR,IAAMO,OAAO,MAE9BzK,EAAW8E,YAAYxC,GACvB9D,EAAUsG,YAAYvC,GACtBG,EAAWuC,cAEjBiF,IAAMhF,WAAU,WACdxC,EAASvC,OACR,CAACiK,IAEJ,IAIMO,EAAkB,WACtBJ,EAAY,OAURK,EAAqB,SAAClM,GAC1BiM,IACAjI,EAAS5B,EAAKtC,EAAQ2C,QAAO,SAAC0J,EAAGC,GAAJ,OAAWA,IAAOpM,QA+B3CqM,EAAa,uCAAG,gCAAA1N,EAAA,sDACpB,IACEsN,IAGIK,EAAUC,GAFO,GACSzM,SAE1B0M,EAAMC,UAAeH,GACnBI,EAAO,IAAIC,KAAK,CAACH,GAAM,CAAEtN,KAAM,aAOf,SAAC0N,EAAMC,GAC3B,IAAIC,EAAa,IAAIC,WACrBD,EAAWE,OAAS,SAAUzI,GAAKsI,EAAStI,EAAEuG,OAAOmC,SACrDH,EAAWI,cAAcN,GAG3BO,CAAcT,GAAM,SAACU,GACnBpB,EAAeqB,QAAQvE,KAAOsE,EAC9BpB,EAAeqB,QAAQC,UAAYF,EACnCpB,EAAeqB,QAAQE,SAAW,eAClCvB,EAAeqB,QAAQG,WAEzB,MAAOjJ,GACPvF,QAAQC,MAAMsF,GA3BI,2CAAH,qDA+BbkJ,EAAU,SAAChD,EAAOzK,GACtB,IAAM0N,EAAW5N,EAAQuE,KAAI,SAACsJ,EAAGvB,GAC/B,OAAIA,IAAOpM,EAAUyK,EACdkD,KAET3J,EAAS5B,EAAKsL,KAGVxD,EAAmB,SAACO,GACxBzG,EAAS3B,EAASoI,KAGdmD,EAAU,uCAAG,sBAAAjP,EAAA,sDACjBqF,EAASW,GAAa,CACpB7E,UAASwB,cAEXuM,MAAM,qBAJW,2CAAH,qDAoBVC,EATe,WACnB,IAAQ9C,EAAc+C,GAAahD,IAA3BC,UAER,OADUlL,EAAQoE,SACR8G,EACD,aAEF,cAGSgD,GACZ1H,EAAUzB,KACVoJ,EAAW,CACf,CAAEC,MAAO,MAAOC,KAAM,eAAC,KAAD,CAAgB3I,SAAS,UAAYtD,OA1GrC,WACtB+J,IACInM,EAAQoE,OAAS6J,GAAahD,IAAIC,WACpChH,EAAS5B,EAAK,GAAD,mBAAKtC,GAAL,CAAc,QAuGuDsO,SAAUtO,EAAQoE,QAAU6J,GAAahD,IAAIC,WACjI,CAAEkD,MAAO,aAAcC,KAAM,eAAC,KAAD,CAAY3I,SAAS,UAAYtD,OA/F1C,WACpB4J,EAAWuB,QAAQG,UA+FnB,CAAEU,MAAO,SAAUC,KAAM,eAAC,KAAD,CAAY3I,SAAS,UAAYtD,OAAQmK,EAAe+B,UAAU,EAAMnJ,SAAS,IAG5G,OACE,iCACE,gBAACoJ,GAAA,EAAD,CAAMC,MAAO,CAAEC,cAAe,GAA9B,UACE,eAACC,GAAA,EAAD,CACEtM,OACE,eAACmG,EAAA,EAAD,CAAYE,QA5HE,SAAC7B,GACvBmF,EAAYnF,EAAM+H,gBA2H4B,gBAAc,cAAc,gBAAc,OAAO,aAAW,OAAlG,SACE,eAAC,KAAD,MAGJP,MAAK,UAAKJ,GACVY,qBAAsB,CACpBhH,QAAS,MAEXiH,UAAU,uCAEZ,eAACC,GAAA,EAAD,CACEhE,GAAG,cACHgB,SAAUA,EACViD,aAAW,EACX9F,KAAM+F,QAAQlD,GACdmD,QAAS9C,EALX,SAOGgC,EAAS5J,KAAI,SAAC2K,EAAKhP,GAClB,YAAwBgD,IAAhBgM,EAAI/J,SAAwB+J,EAAI/J,QACtC,gBAACgK,GAAA,EAAD,CAEE1G,QAASyG,EAAI9M,OACbkM,cAA2BpL,IAAjBgM,EAAIZ,UAAyBY,EAAIZ,SAH7C,UAKE,eAACc,GAAA,EAAD,UAAeF,EAAIb,OACnB,eAACgB,GAAA,EAAD,CAAcC,QAASJ,EAAId,UALtBlO,GAOJ,QAGT,eAACqP,GAAA,EAAD,UACGvP,EAAQuE,KAAI,SAACiL,EAAGtP,GAAJ,OACX,eAAC,GAAD,CAEEgK,SAAU1I,EACV2I,MAAOjK,EACPE,KAAMoP,EACNpF,iBAAkBA,EAClBC,YAAasD,EACbrD,aAAc8B,EACd7B,aAAcvK,EAAQoE,QAAU,GAP3BlE,WAeb,uBAAKyH,UAAWnB,EAAQ4E,UAAxB,UACE,eAACqE,GAAA,EAAD,CAAQ7H,QAAQ,YAAYjC,MAAM,YAAYgC,UAAWnB,EAAQ8E,UAAW7C,QA3E9D,WAClBoD,GAAW,SAAA6D,GAAI,OAAKA,MA0EhB,mBACA,eAACD,GAAA,EAAD,CAAQ7H,QAAQ,YAAYjC,MAAM,UAAU8C,QAASqF,EAArD,qBAEF,wBAAO1O,KAAK,OAAO0L,GAAG,SAAS6E,IAAK3D,EAAYrE,UAAWnB,EAAQgF,MAAOZ,SAxJzD,SAAChE,GACpBA,EAAMgJ,kBACNhJ,EAAMiJ,iBACN1D,IACA,IAAIS,EAAOhG,EAAMoE,OAAO8E,MAAM,GAC1BC,EAAS,IAAI9C,WACjB8C,EAAO7C,OAAS,SAAUtG,GACxB,IAEE,IAAM8F,EAAM9F,EAAMoE,OAAOmC,OACrBA,EAASR,UAAeD,GAC5B,IAAKS,EAAQ,KAAK,oDAAL,OAA0DA,GACvE,IACIS,EADiBT,EAAOzD,SAAS,GAAGA,SACVnF,KAAI,SAAAqF,GAAI,OAAIA,EAAKF,SAAS,GAAGvD,QAC3DjC,EAAS5B,EAAKsL,IACd,MAAOnJ,GACPsJ,MAAM,6CACN7O,QAAQC,MAAMsF,KAIlBsL,EAAOC,WAAWpD,IAmIkFnE,QAAS,SAAAhE,GAAC,OAAKA,EAAEuG,OAAOL,MAAQ,Y,UCzMzHsF,OA7Bf,WACE,IAKMzJ,EALYxB,aAAW,SAACC,GAAD,MAAY,CACvCiL,SAAU,CACR7E,UAAW,WAGCtG,GAChB,OACE,+BACE,eAACwJ,GAAA,EAAD,CAAMC,MAAO,CAAEC,cAAe,GAA9B,SACE,gBAACc,GAAA,EAAD,WACE,eAACzH,EAAA,EAAD,CAAYF,QAAQ,KAAKjC,MAAM,gBAA/B,0BACA,gBAACmC,EAAA,EAAD,CAAYF,QAAQ,YAAYjC,MAAM,gBAAtC,0BACe,eAACwK,GAAA,EAAD,CAAMxK,MAAM,UAAUyK,UAAU,OAAOpH,KAAK,+DAA+DgC,OAAO,SAAlH,oBADf,OAGA,eAAClD,EAAA,EAAD,CAAYF,QAAQ,KAAKjC,MAAM,gBAAgBgC,UAAWnB,EAAQ0J,SAAlE,oBACA,eAACpI,EAAA,EAAD,CAAYF,QAAQ,YAAYjC,MAAM,gBAAtC,wHAGA,eAACwK,GAAA,EAAD,CAAMC,UAAU,OAAOpH,KAAK,wCAAwCgC,OAAO,SAA3E,mDACA,eAAClD,EAAA,EAAD,CAAYF,QAAQ,YAAYjC,MAAM,gBAAgBgC,UAAWnB,EAAQ0J,SAAzE,0C,oBCoFKG,OA5Ff,WACE,MAAwB1E,mBAAS,IAAjC,mBAAOxF,EAAP,KAAamK,EAAb,KACMpM,EAAWuC,cAkBXD,EAhBYxB,aAAW,SAACC,GAAD,MAAY,CACvCiL,SAAU,CACR7E,UAAW,QAEbD,UAAW,CACTjG,QAAS,OACTC,eAAgB,SAChBiG,UAAW,IAEbC,UAAW,CACTC,OAAQ,YAEVgF,YAAa,CACXC,MAAO,WAGKzL,GAuBV0L,EAAY,uCAAG,oCAAA5R,EAAA,sEAEYsC,EAAMU,QAAQ,QAF1B,OAEX6O,EAFW,OAGb9C,EAAW8C,EAAe1Q,QAC1BwM,EAAUC,GAAkCmB,GAC5ClB,EAAMC,UAAeH,GACnBmE,EAAUC,KAASC,8BAA8BnE,GACvD4D,EAAQK,GAPS,2CAAH,qDAWlB,OACE,+BACE,gBAACpC,GAAA,EAAD,CAAMC,MAAO,CAAEC,cAAe,GAA9B,UACE,eAACC,GAAA,EAAD,CACEN,MAAK,kBACLQ,qBAAsB,CACpBhH,QAAS,QAIb,gBAAC2H,GAAA,EAAD,WACE,eAAC1E,GAAA,EAAD,CACEC,GAAG,eACHC,MAAM,kBACN+F,WAAS,EACTC,KAAM,GACNpJ,UAAWnB,EAAQ+J,YACnB3I,QAAQ,WACRY,KAAK,QACLmC,MAAOxE,EACPyE,SAnDS,SAACnG,GAClB6L,EAAQ7L,EAAEuG,OAAOL,OACjBzL,QAAQmE,IAAI8C,MAmDN,uBAAKwB,UAAWnB,EAAQ4E,UAAxB,UACE,eAACqE,GAAA,EAAD,CAAQ7H,QAAQ,YAAYjC,MAAM,YAAYgC,UAAWnB,EAAQ8E,UAAW7C,QAjDjE,WACnB,IACE,IAAMiE,EAAMkE,KAASI,kCAAkC7K,GACnDgH,EAASR,UAAeD,GAC5B,IAAKS,EAAQ,KAAK,kDAAL,OAAwDA,GACrE,IACInN,EADiBmN,EAAOzD,SAAS,GAAGA,SACXnF,KAAI,SAAAqF,GAAI,OAAIA,EAAKF,SAAS,GAAGvD,QAC1DjC,EAASW,GAAa,CAAE7E,aACxB+N,MAAM,wBACN,MAAOtJ,GACPsJ,MAAM,oCACN7O,QAAQC,MAAMsF,KAsCR,oBACA,eAACgL,GAAA,EAAD,CAAQ7H,QAAQ,YAAYjC,MAAM,UAAU8C,QAASgI,EAArD,uBAEF,eAAC3I,EAAA,EAAD,CAAYF,QAAQ,YAAYjC,MAAM,gBAAgBgC,UAAWnB,EAAQ0J,SAAzE,0DAGA,eAACpI,EAAA,EAAD,CAAYF,QAAQ,YAAYjC,MAAM,gBAAtC,iE,gCCvFV,SAASsL,GAAS7I,GAChB,IAAQ8I,EAAqC9I,EAArC8I,SAAUvG,EAA2BvC,EAA3BuC,MAAOR,EAAoB/B,EAApB+B,MAAUgH,EAAnC,aAA6C/I,EAA7C,IAEA,OACE,8CACEgJ,KAAK,WACLC,OAAQ1G,IAAUR,EAClBW,GAAE,8BAAyBX,GAC3B,2CAAmCA,IAC/BgH,GALN,aAOGxG,IAAUR,GACT,eAACmH,GAAA,EAAD,CAAKjF,EAAG,EAAR,SACE,eAACvE,EAAA,EAAD,UAAaoJ,SAOvB,SAASK,GAAUpH,GACjB,MAAO,CACLW,GAAG,kBAAD,OAAoBX,GACtB,gBAAgB,uBAAhB,OAAwCA,IAuE7BqH,OAnEf,WACE,IAAMvM,EAAQwM,eAmBRjL,EAlBYxB,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJI,WAAYL,EAAMW,QAAQN,WAAWoM,QACrCC,OAAQ,cAeI5M,GAChB,EAA0B2G,IAAMC,SAAS,GAAzC,mBAAOhB,EAAP,KAAciH,EAAd,KAUA,OACE,uBAAKjK,UAAWnB,EAAQtB,KAAxB,UAEE,eAAC2M,GAAA,EAAD,CAAQtP,SAAS,SAASoD,MAAM,UAAhC,SACE,gBAACmM,GAAA,EAAD,CACEnH,MAAOA,EACPC,SAda,SAAChE,EAAOmL,GAC3BH,EAASG,IAcHC,eAAe,UACfC,UAAU,UACVrK,QAAQ,YACR,aAAW,0BANb,UAQE,eAACsK,GAAA,EAAD,aAAKnH,MAAM,WAAcwG,GAAU,KACnC,eAACW,GAAA,EAAD,aAAKnH,MAAM,iBAAoBwG,GAAU,KACzC,eAACW,GAAA,EAAD,aAAKnH,MAAM,SAAYwG,GAAU,UAGrC,gBAAC,KAAD,CAEEpH,MAAOQ,EACPwH,cAxBoB,SAAChI,GACzByH,EAASzH,IAoBP,UAKE,eAAC8G,GAAD,CAAUtG,MAAOA,EAAOR,MAAO,EAAGiI,IAAKnN,EAAMoN,UAA7C,SACE,eAAC,GAAD,MAEF,eAACpB,GAAD,CAAUtG,MAAOA,EAAOR,MAAO,EAAGiI,IAAKnN,EAAMoN,UAA7C,SACE,eAAC,GAAD,MAEF,eAACpB,GAAD,CAAUtG,MAAOA,EAAOR,MAAO,EAAGiI,IAAKnN,EAAMoN,UAA7C,SACE,eAAC,GAAD,aCzEKC,OAlBf,WAEE,OACE,qCACE,eAAC,IAAD,UACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,eAAC,GAAD,MAEF,eAAC,IAAD,CAAOA,KAAK,YAAZ,SACE,eAAC,GAAD,cChBC3R,GAAQ4R,YAAe,CAClCC,QAAS,CACP5Q,KAAM6Q,MCKJ1N,I,OAAQ2N,YAAY,CACxBhN,QAAS,CACPxG,KAAM,WAIVyT,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,gBAACC,EAAA,EAAD,CAAe/N,MAAOA,GAAtB,UACE,eAACgO,EAAA,EAAD,IACA,eAAC,IAAD,CAAUpS,MAAOA,GAAjB,SACE,eAAC,GAAD,WAINqS,SAASC,eAAe,W","file":"static/js/main.4c4ef9f9.chunk.js","sourcesContent":["\r\n\r\nexport const connect = (listeners) => {\r\n  try {\r\n    listeners.forEach(listener => {\r\n      window.addOverlayListener(listener.name, (e) => listener.event(e))\r\n    })\r\n    window.startOverlayEvents()\r\n    console.log(\"Started Overlay plugin\")\r\n  } catch (e) {\r\n    console.error(\"Must import Overlay Plugin CDN\")\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nexport const disconnect = (listeners) => {\r\n  try {\r\n    listeners.forEach(listener => {\r\n      window.removeOverlayListener(listener.name, (e) => listener.event(e))\r\n    })\r\n    console.log(\"Stopped Overlay plugin\")\r\n  } catch (e) {\r\n    console.error(\"Must import Overlay Plugin CDN\")\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nexport const tts = async (msg) => {\r\n  try {\r\n    const call = createMessage('say', 'text', msg)\r\n    await window.callOverlayHandler(call)\r\n    return true\r\n  } catch (e) {\r\n    console.error(e)\r\n    return false\r\n  }\r\n}\r\n\r\nexport const createMessage = (type, key, data) => {\r\n  const call = {\r\n    call: type,\r\n    [key]: data,\r\n    key, data\r\n  }\r\n  return call\r\n}","\r\nconst config = {\r\n    gaolRegex: /\\|(.*)?\\|2B6(B|C)\\|.*?\\|.*?\\|/,\r\n    nameRegex: /2B6(B|C)\\|.*?\\|.*?\\|[A-Za-z ]+/,\r\n    testRegex: /(.*)?(#-135-).*?/,\r\n    testNameRegex: /#-135-[A-Za-z ]+/\r\n}\r\n\r\nexport default config","import RegexConfig from '../../config/regex'\r\n\r\nconst regex = RegexConfig.gaolRegex\r\nconst regexTest = RegexConfig.testRegex\r\nconst nameRegex = RegexConfig.nameRegex\r\nconst testNameRegex = RegexConfig.testNameRegex\r\n\r\n\r\n\r\n/**\r\n * Issue: Cannot use global \"g\" flag in Regex because will use lastIndex\r\n * So, testing will be wrong result in some case.\r\n * var re = /^a/g;\r\n * re.test(\"ab\") // true, lastIndex was 0\r\n * re.test(\"ab\") // false, lastIndex was 1\r\n * https://stackoverflow.com/a/6891667\r\n * \r\n * @param {String} str rawLine\r\n * @returns Array\r\n */\r\nexport const isGaolLog = (str) => regex.test(str) || regexTest.test(str)\r\n\r\nexport const getPlayerFromRaw = (players, rawLine) => {\r\n  const i = players.findIndex(name => rawLine.includes(name))\r\n  return [i, i > -1] // player name, index, is found\r\n}\r\n\r\nexport const getGaolOrderByMe = (me, gaoled) => {\r\n  let order = -1\r\n  let arr = gaoled.map(i => i)\r\n  arr.sort(sortByASC)\r\n  order = arr.findIndex(e => e === me) + 1\r\n  return [order, order > -1]\r\n}\r\n\r\nexport const sortByASC = (a, b) => a - b\r\n\r\nexport const getNameFromRaw = (rawLine) => {\r\n  let match = rawLine.match(nameRegex)\r\n  let testMatch = rawLine.match(testNameRegex)\r\n  if (match) {\r\n    const name = match[0].split('|').pop()\r\n    return name\r\n  } else if (testMatch) {\r\n    const name = testMatch[0].split('-').pop()\r\n    return name\r\n  }\r\n  return null\r\n}","import * as localForage from \"localforage\"\n\nconst store = localForage.createInstance({\n    name: \"gaoloverlay\"\n});\n\nexport default store","import local from '../../plugins/localForage'\r\n\r\nexport function fetchUserConfig() {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      const gaol = await local.getItem('gaol')\r\n      resolve(gaol || {})\r\n    } catch (e) {\r\n      reject(e)\r\n    }\r\n  });\r\n}\r\n\r\nexport function updateUserConfig(config) {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      await local.setItem('gaol', { ...config })\r\n      resolve(true)\r\n    } catch (e) {\r\n      reject(e)\r\n    }\r\n  });\r\n}\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { fetchUserConfig as fetchUserConfigAPI, updateUserConfig as updateUserConfigAPI } from './gaolAPI';\r\nimport * as gaolService from './gaolService'\r\nimport * as gaolAdaper from './gaolAdapter'\r\n\r\nconst initialState = {\r\n  number: -1,\r\n  players: [],\r\n  gaoledPlayers: [],\r\n  myNumber: -1,\r\n  nog: 3,\r\n  status: 'ready',\r\n  error: '',\r\n};\r\n\r\nconst isExpire = (timestamp) => new Date().getTime() > timestamp\r\n\r\n// The function below is called a thunk and allows us to perform async logic. It\r\n// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This\r\n// will call the thunk with the `dispatch` function as the first argument. Async\r\n// code can then be executed and other actions can be dispatched. Thunks are\r\n// typically used to make async requests.\r\nexport const fetchUserConfig = createAsyncThunk(\r\n  'gaol/fetchUserConfig',\r\n  async () => {\r\n    const config = await fetchUserConfigAPI()\r\n    // The value we return becomes the `fulfilled` action payload\r\n    return config\r\n  }\r\n);\r\n\r\nexport const gaolSlice = createSlice({\r\n  name: 'gaol',\r\n  initialState,\r\n  // The `reducers` field lets us define reducers and generate associated actions\r\n  reducers: {\r\n    order: (state, action) => {\r\n      state.number = action.payload;\r\n    },\r\n    form: (state, action) => {\r\n      state.players = action.payload;\r\n    },\r\n    position: (state, action) => {\r\n      state.myNumber = action.payload;\r\n    },\r\n    error: (state, action) => {\r\n      state.error = action.payload;\r\n    },\r\n    appendGaoledPlayer: (state, action) => {\r\n      const iplayer =  action.payload\r\n      \r\n      // filter out gaol that expired.\r\n      // prevent unexpected gaol such as header's gaol\r\n      // wrong case: 5 = healer, [6, 4, 2] = next gaol. Thus, gaol will be [5, 6, 4] instead of [6, 4, 2].\r\n      const gaoled = state.gaoledPlayers.filter(gp => !isExpire(gp.lte))\r\n      // prevent duplicate\r\n      const duplicate = gaoled.find(gp => gp.iplayer === iplayer) !== undefined\r\n      const newItem = { iplayer, lte: new Date().getTime() + 3000 }\r\n      state.gaoledPlayers = !duplicate ? [...gaoled, newItem] : gaoled\r\n      if (duplicate) {\r\n        console.log('Duplicate player on gaol', iplayer)\r\n      }\r\n    },\r\n    resetGaoledPlayer: (state) => {\r\n      state.gaoledPlayers = []\r\n    },\r\n  },\r\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\r\n  // including actions generated by createAsyncThunk or in other slices.\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchUserConfig.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(fetchUserConfig.fulfilled, (state, action) => {\r\n        state.status = 'ready';\r\n        state.players = action.payload.players || state.players\r\n        state.myNumber = action.payload.myNumber !== undefined ? action.payload.myNumber : state.myNumber\r\n      });\r\n  },\r\n});\r\n\r\nexport const { order, form, position, error, appendGaoledPlayer, resetGaoledPlayer } = gaolSlice.actions;\r\n\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectNumber = (state) => state.gaol.number;\r\nexport const selectMyNumber = (state) => state.gaol.myNumber;\r\nexport const selectPlayers = (state) => state.gaol.players;\r\nexport const selectGaoledPlayers = (state) => state.gaol.gaoledPlayers;\r\nexport const selectError = (state) => state.gaol.error;\r\n\r\n\r\n// We can also write thunks by hand, which may contain both sync and async logic.\r\n// Here's an example of conditionally dispatching actions based on current state.\r\n/**\r\n * \r\n * Raw line examples:\r\n * 15|4001641A|Titan|2B6C|Rock Throw|10334A83|Windie Likesakiii|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|42891|50096|9336|10000|0|1000|97.37081|113.451|-0.01279504|-3.055689|2675710|4476950|0|10000|0|1000|113.7886|86.21142|-1.378858E-12|-0.7854581|00008C59|0\r\n * 15|4001641B|Titan|2B6C|Rock Throw|10264B3D|Anger Shana|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|75033|75033|10000|10000|0|1000|96.35912|113.5649|-0.002290758|3.081287|2675710|4476950|0|10000|0|1000|116.7683|99.91648|-8.35191E-15|-1.48065|00008C5A|0\r\n * 15|40016420|Titan|2B6B|Rock Throw|1032B65A|Zengoku Mustard|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|45764|54967|10000|10000|0|1000|96.73949|114.1539|-0.001052974|-1.584579|3155300|4607480|10000|10000|0|1000|100|86|-1.4E-12|-4.792213E-05|00008C5B|0\r\n * @param {*} param0 data\r\n * @returns false | void\r\n */\r\nexport const updateGaol = (rawLine) => (dispatch, getState) => {\r\n  const { getNameFromRaw, getPlayerFromRaw } = gaolService\r\n  const players = selectPlayers(getState())\r\n  const [i, isFound] = getPlayerFromRaw(players, rawLine)\r\n  if (!isFound) {\r\n    dispatch(resetGaoledPlayer())\r\n    const name = getNameFromRaw(rawLine)\r\n    if (name) {\r\n      dispatch(error(`${name} isn't in the party.`))\r\n      setTimeout(() => dispatch(error('')), 3000)\r\n    }\r\n    return\r\n  }\r\n\r\n  dispatch(appendGaoledPlayer(i))\r\n  dispatch(orderGaol())\r\n}\r\n\r\nexport const orderGaol = () => (dispatch, getState) => {\r\n  const gaoledPlayers = selectGaoledPlayers(getState())\r\n  if (gaoledPlayers.length === 3) {\r\n    const myNumber = selectMyNumber(getState())\r\n    let [number] = gaolService.getGaolOrderByMe(myNumber, gaoledPlayers.map(gp => gp.iplayer))\r\n    console.log(new Date(), gaoledPlayers, number)\r\n\r\n    // tts gaol temp.\r\n    const msg = number || \"Eating Titan's ass.\"\r\n    gaolAdaper.tts(msg)\r\n\r\n    setTimeout(() => {\r\n      dispatch(resetGaoledPlayer())\r\n      dispatch(order(-1))\r\n    }, 10000)\r\n    dispatch(order(number))\r\n  }\r\n}\r\n\r\nexport const updateConfig = ({ players, myNumber = initialState.myNumber }) => async (dispatch) => {\r\n  await updateUserConfigAPI({ players, myNumber })\r\n}\r\n\r\nexport default gaolSlice.reducer;\r\n","import { useEffect, useCallback } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\nimport { Paper, Typography } from '@material-ui/core'\r\nimport { alpha, makeStyles } from '@material-ui/core/styles'\r\nimport Countdown from 'react-countdown'\r\n\r\nimport { connect as gaolConnect, disconnect as gaolDisconnect } from \"./gaolAdapter\"\r\nimport * as gaolService from './gaolService'\r\nimport {\r\n  selectNumber,\r\n  fetchUserConfig,\r\n  updateGaol,\r\n  selectError,\r\n} from './gaolSlice'\r\nimport './Gaol.css'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => {\r\n  return {\r\n    root: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      padding: '5px 8px',\r\n      background: alpha('#000000', 0.5),\r\n      // background: alpha(theme.palette.background.default, 0.8),\r\n      // borderRadius: '10%',\r\n    },\r\n    msgRoot: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center',\r\n    },\r\n    msg: {\r\n      fontSize: '9px',\r\n    },\r\n    order: {\r\n      color: theme.palette.success.main,\r\n    },\r\n    timer: {\r\n      fontSize: '10px',\r\n    },\r\n    paper: {\r\n      padding: theme.spacing(2),\r\n      textAlign: 'center',\r\n      color: theme.palette.text.secondary,\r\n    },\r\n  }\r\n});\r\n\r\nfunction Gaol() {\r\n  const number = useSelector(selectNumber)\r\n  const errorMsg = useSelector(selectError)\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchUserConfig())\r\n    const listeners = [\r\n      { name: 'LogLine', event: gaolEvent },\r\n    ]\r\n    gaolConnect(listeners)\r\n    return () => gaolDisconnect(listeners)\r\n  }, [])\r\n\r\n  const gaolEvent = useCallback((data) => {\r\n    const { rawLine } = data\r\n    if (!gaolService.isGaolLog(rawLine)) return\r\n    dispatch(fetchUserConfig()).then(() => {\r\n      dispatch(updateGaol(rawLine))\r\n    })\r\n  }, [])\r\n\r\n\r\n  const openWindowSetting = () => {\r\n    let querystring = String(window.location.search)\r\n    let joiner = (querystring.indexOf(\"?\") !== -1) ? \"&\" : \"?\"\r\n    querystring = `${querystring}${joiner}`\r\n    let href = window.location.href\r\n    window.open(`${href}settings`, \"\", \"width=630,height=870,location=no,menubar=yes\");\r\n  }\r\n\r\n  const toNumberString = () => {\r\n    if (number > -1) {\r\n      return number || \"Eating Titan's ass.\"\r\n    }\r\n    return \"N/A\"\r\n  }\r\n\r\n  const isCountdown = () => {\r\n    if (number > -1) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\" elevation={3}>\r\n      <div className={classes.msgRoot}>\r\n        <Typography variant=\"p\">\r\n          Gaol:\r\n          <span> </span>\r\n          <Typography variant=\"subtitle1\" className={classes.order} display=\"inline\">{toNumberString()}</Typography>\r\n          <span> </span>\r\n          {isCountdown() && (\r\n            <Countdown\r\n              date={Date.now() + 10000}\r\n              intervalDelay={0}\r\n              precision={2}\r\n              renderer={props => (\r\n                <Typography variant=\"subtitle1\" className={classes.timer} display=\"inline\">\r\n                  {`${props.seconds}.${props.milliseconds}`}\r\n                </Typography>\r\n              )}\r\n            />\r\n          )}\r\n        </Typography>\r\n        <Typography variant=\"body2\" className={classes.msg} color=\"error\">{errorMsg || ''}</Typography>\r\n      </div>\r\n      <div>\r\n        <IconButton aria-label=\"setting\" size=\"small\" onClick={() => openWindowSetting()}>\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default Gaol;\r\n","\n\nexport const getInitialJsonXML = () => {\n  let json = {\n    declaration: {\n      attributes: {\n        version: \"1.0\",\n        encoding: \"utf-8\",\n        standalone: \"yes\"\n      }\n    },\n    elements: [],\n  }\n\n  return json\n}\n\nexport const array2PriorityJsonXML = (arr) => {\n  let json = getInitialJsonXML()\n  let playerElements = arr.map(item => {\n    return {\n      type: \"element\",\n      name: \"Player\",\n      elements: [{ type: \"text\", text: item }]\n    }\n  })\n  json.elements.push({\n    type: \"element\",\n    name: \"Priority\",\n    elements: playerElements,\n  })\n  return json\n}","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport Radio from '@material-ui/core/Radio'\nimport IconButton from '@material-ui/core/IconButton'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\nconst useStyles = makeStyles((theme) => ({\n  characterRow: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: '7px 6px',\n  },\n  no: {\n    marginRight: '6px',\n  }\n}));\n\nfunction CharacterRow({ name = \"\", selectMe, index, onChangeSelectMe, onTextInput, removeHandle, hiddenAction }) {\n\n  const classes = useStyles();\n  return (\n    <div className={classes.characterRow}>\n      <div>\n        <Typography className={classes.no} variant=\"body2\" component=\"span\">{index + 1}</Typography>\n        <Radio size=\"small\" checked={selectMe === index} value={index} onChange={() => onChangeSelectMe(index)} />\n        <TextField id=\"filled-search\" label=\"Character Name\" value={name} type=\"text\" variant=\"outlined\" size=\"small\" onChange={(e) => onTextInput(e.target.value, index)} />\n      </div>\n      {!hiddenAction && (\n        <IconButton aria-label=\"remove\" color=\"secondary\" size=\"small\" onClick={() => removeHandle(index)}>\n          <DeleteIcon />\n        </IconButton>\n      )}\n    </div>\n  )\n}\n\nexport default CharacterRow","\r\nconst config = {\r\n    max: {\r\n        fullParty: 8,\r\n        lightParty: 4,\r\n    }\r\n}\r\n\r\nexport default config","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert'\r\nimport LibraryAddIcon from '@material-ui/icons/LibraryAdd'\r\nimport GetAppIcon from '@material-ui/icons/GetApp'\r\nimport BackupIcon from '@material-ui/icons/Backup'\r\nimport { Button } from '@material-ui/core'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport * as convert from 'xml-js'\r\n\r\nimport * as utilConvert from '../../utils/xml-js'\r\nimport CharacterRow from './CharacterRow'\r\nimport * as Config from '../../config'\r\nimport {\r\n  form,\r\n  position,\r\n  selectPlayers,\r\n  fetchUserConfig,\r\n  updateConfig,\r\n  selectMyNumber,\r\n} from '../../features/gaol/gaolSlice'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  actionDiv: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    marginTop: 10,\r\n  },\r\n  cancelBtn: {\r\n    margin: '0px 10px',\r\n  },\r\n  dnone: {\r\n    display: 'none'\r\n  },\r\n}));\r\n\r\n\r\nfunction PartyPanel() {\r\n  const [isReset, setIsReset] = React.useState(false)\r\n  const [anchorEl, setAnchorEl] = React.useState(null)\r\n  const importFile = React.useRef(null)\r\n  const tempExportLink = React.useRef(null)\r\n\r\n  const myNumber = useSelector(selectMyNumber)\r\n  const players = useSelector(selectPlayers)\r\n  const dispatch = useDispatch()\r\n\r\n  React.useEffect(() => {\r\n    dispatch(fetchUserConfig())\r\n  }, [isReset])\r\n\r\n  const handleMenuClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const newMemberHandle = () => {\r\n    handleMenuClose()\r\n    if (players.length < Config.party.max.fullParty) {\r\n      dispatch(form([...players, \"\"]))\r\n    }\r\n  }\r\n\r\n  const removeMemberHandle = (i) => {\r\n    handleMenuClose()\r\n    dispatch(form(players.filter((p, pi) => pi !== i)))\r\n  }\r\n\r\n  const onCLickImport = () => {\r\n    importFile.current.click()\r\n  }\r\n\r\n  const importHandle = (event) => {\r\n    event.stopPropagation()\r\n    event.preventDefault()\r\n    handleMenuClose()\r\n    let file = event.target.files[0]\r\n    let reader = new FileReader()\r\n    reader.onload = function (event) {\r\n      try {\r\n        // The file's text will be printed here\r\n        const xml = event.target.result\r\n        let result = convert.xml2js(xml)\r\n        if (!result) throw `The reault of file's content is invalid, result: ${result}`;\r\n        let playerElements = result.elements[0].elements\r\n        let nplayers = playerElements.map(item => item.elements[0].text)\r\n        dispatch(form(nplayers))\r\n      } catch (e) {\r\n        alert(\"Cannot import XML file, please try again.\")\r\n        console.error(e)\r\n      }\r\n    }\r\n\r\n    reader.readAsText(file)\r\n  }\r\n\r\n  const onClickExport = async () => {\r\n    try {\r\n      handleMenuClose()\r\n      let userGaolConfig = {}\r\n      let nplayers = userGaolConfig.players\r\n      let jsonXML = utilConvert.array2PriorityJsonXML(nplayers)\r\n      let xml = convert.js2xml(jsonXML)\r\n      const file = new Blob([xml], { type: 'text/xml' })\r\n      // const element = document.createElement(\"a\")\r\n      // element.href = URL.createObjectURL(file)\r\n      // element.download = \"Priority.xml\"\r\n      // document.body.appendChild(element) // Required for this to work in FireFox\r\n      // element.click()\r\n\r\n      const blobToDataURL = (blob, callback) => {\r\n        var fileReader = new FileReader();\r\n        fileReader.onload = function (e) { callback(e.target.result); }\r\n        fileReader.readAsDataURL(blob);\r\n      }\r\n\r\n      blobToDataURL(file, (url) => {\r\n        tempExportLink.current.href = url\r\n        tempExportLink.current.innerText = url\r\n        tempExportLink.current.download = \"Priority.xml\"\r\n        tempExportLink.current.click()\r\n      })\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  const onInput = (value, i) => {\r\n    const nplayers = players.map((v, pi) => {\r\n      if (pi === i) return value\r\n      return v\r\n    })\r\n    dispatch(form(nplayers))\r\n  }\r\n\r\n  const onChangeSelectMe = (value) => {\r\n    dispatch(position(value))\r\n  }\r\n\r\n  const saveConfig = async () => {\r\n    dispatch(updateConfig({\r\n      players, myNumber,\r\n    }))\r\n    alert(\"Saved successful.\")\r\n  }\r\n\r\n  const resetConfig = () => {\r\n    setIsReset(prev => !prev)\r\n  }\r\n\r\n  const getPartyType = () => {\r\n    const { fullParty } = Config.party.max\r\n    const n = players.length\r\n    if (n === fullParty) {\r\n      return \"Full Party\"\r\n    } \r\n    return \"Light Party\"\r\n  }\r\n\r\n  const partyType = getPartyType()\r\n  const classes = useStyles();\r\n  const menuList = [\r\n    { title: 'New', icon: <LibraryAddIcon fontSize=\"small\" />, action: newMemberHandle, disabled: players.length >= Config.party.max.fullParty },\r\n    { title: 'Import XML', icon: <BackupIcon fontSize=\"small\" />, action: onCLickImport },\r\n    { title: 'Export', icon: <GetAppIcon fontSize=\"small\" />, action: onClickExport, disabled: true, display: false },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <Card style={{ paddingBottom: 0 }}>\r\n        <CardHeader\r\n          action={\r\n            <IconButton onClick={handleMenuClick} aria-controls=\"simple-menu\" aria-haspopup=\"true\" aria-label=\"more\">\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          }\r\n          title={`${partyType}`}\r\n          titleTypographyProps={{\r\n            variant: 'h6',\r\n          }}\r\n          subheader=\"The ones who are suffering in UwU.\"\r\n        />\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n        >\r\n          {menuList.map((obj, i) => {\r\n            return (obj.display !== undefined ? obj.display : true) ? (\r\n              <MenuItem\r\n                key={i}\r\n                onClick={obj.action}\r\n                disabled={obj.disabled !== undefined ? obj.disabled : false}\r\n              >\r\n                <ListItemIcon>{obj.icon}</ListItemIcon>\r\n                <ListItemText primary={obj.title} />\r\n              </MenuItem>\r\n            ) : ('')\r\n          })}\r\n        </Menu>\r\n        <CardContent>\r\n          {players.map((n, i) => (\r\n            <CharacterRow\r\n              key={i}\r\n              selectMe={myNumber}\r\n              index={i}\r\n              name={n}\r\n              onChangeSelectMe={onChangeSelectMe}\r\n              onTextInput={onInput}\r\n              removeHandle={removeMemberHandle}\r\n              hiddenAction={players.length <= 1}\r\n            />\r\n          ))}\r\n          {/* <RadioGroup aria-label=\"quiz\" name=\"quiz\" value={value} onChange={handleRadioChange}>\r\n          <FormControlLabel value=\"0\" control={<Radio />} label={<CharacterInfo />} />\r\n        </RadioGroup> */}\r\n        </CardContent>\r\n      </Card>\r\n      <div className={classes.actionDiv}>\r\n        <Button variant=\"contained\" color=\"secondary\" className={classes.cancelBtn} onClick={resetConfig}>Reset</Button>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={saveConfig}>Save</Button>\r\n      </div>\r\n      <input type=\"file\" id=\"import\" ref={importFile} className={classes.dnone} onChange={importHandle} onClick={e => (e.target.value = null)} />\r\n      {/* <a href=\"#\" id=\"tem_link\" ref={tempExportLink}>sssss</a> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PartyPanel","import { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Typography from '@material-ui/core/Typography'\nimport { Link } from '@material-ui/core'\n\nfunction About() {\n  const useStyles = makeStyles((theme) => ({\n    spaceTop: {\n      marginTop: '30px',\n    },\n  }))\n  const classes = useStyles()\n  return (\n    <div>\n      <Card style={{ paddingBottom: 0 }}>\n        <CardContent>\n          <Typography variant=\"h6\" color=\"textSecondary\">Gaol Overlay</Typography>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\">\n            Developed by <Link color=\"primary\" underline=\"none\" href=\"https://na.finalfantasyxiv.com/lodestone/character/31961672/\" target=\"_blank\">Supskv</Link>.\n          </Typography>\n          <Typography variant=\"h6\" color=\"textSecondary\" className={classes.spaceTop}>Github</Typography>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\">\n            See the latest code, changelog, and readme on Github. You can also submit bug reports or feature requests.\n          </Typography>\n          <Link underline=\"none\" href=\"https://github.com/supskv/gaol-plugin\" target=\"_blank\">https://github.com/supskv/gaol-plugin</Link>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\" className={classes.spaceTop}>\n            version 0.1.10-alpha\n          </Typography>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nexport default About","import { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport Typography from '@material-ui/core/Typography'\nimport { Button } from '@material-ui/core'\nimport TextField from '@material-ui/core/TextField'\nimport LZString from 'lz-string'\n\nimport * as convert from 'xml-js'\nimport * as utilConvert from '../../utils/xml-js'\nimport local from '../../plugins/localForage'\nimport {\n  updateConfig\n} from '../../features/gaol/gaolSlice'\n\nfunction ImXExport() {\n  const [text, setText] = useState('')\n  const dispatch = useDispatch()\n\n  const useStyles = makeStyles((theme) => ({\n    spaceTop: {\n      marginTop: '30px',\n    },\n    actionDiv: {\n      display: 'flex',\n      justifyContent: 'center',\n      marginTop: 10,\n    },\n    cancelBtn: {\n      margin: '0px 10px',\n    },\n    importInput: {\n      width: '100%',\n    }\n  }))\n  const classes = useStyles()\n\n\n  const textHandle = (e) => {\n    setText(e.target.value)\n    console.log(text)\n  }\n\n  const importHandle = () => {\n    try {\n      const xml = LZString.decompressFromEncodedURIComponent(text)\n      let result = convert.xml2js(xml)\n      if (!result) throw `The reault of the compress is invalid, result: ${result}`\n      let playerElements = result.elements[0].elements\n      let players = playerElements.map(item => item.elements[0].text)\n      dispatch(updateConfig({ players }))\n      alert('Imported Successful.')\n    } catch (e) {\n      alert(\"Cannot import, please try again.\")\n      console.error(e)\n    }\n  }\n\n  const exportHandle = async () => {\n    if (true) {\n      const gaolUserConfig = await local.getItem('gaol')\n      let nplayers = gaolUserConfig.players\n      let jsonXML = utilConvert.array2PriorityJsonXML(nplayers)\n      let xml = convert.js2xml(jsonXML)\n      const encrypt = LZString.compressToEncodedURIComponent(xml)\n      setText(encrypt)\n    }\n  }\n\n  return (\n    <div>\n      <Card style={{ paddingBottom: 0 }}>\n        <CardHeader\n          title={`Import / Export`}\n          titleTypographyProps={{\n            variant: 'h6',\n          }}\n          // subheader=\"The ones who are suffering in UwU.\"\n        />\n        <CardContent>\n          <TextField\n            id=\"import-field\"\n            label=\"Paste text here\"\n            multiline\n            rows={10}\n            className={classes.importInput}\n            variant=\"outlined\"\n            size=\"small\"\n            value={text}\n            onChange={textHandle}\n          />\n          <div className={classes.actionDiv}>\n            <Button variant=\"contained\" color=\"secondary\" className={classes.cancelBtn} onClick={importHandle}>Import</Button>\n            <Button variant=\"contained\" color=\"primary\" onClick={exportHandle}>Export</Button>\n          </div>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\" className={classes.spaceTop}>\n            - Import: Paste the code and click on import\n          </Typography>\n          <Typography variant=\"subtitle2\" color=\"textSecondary\">\n            - Export: Generate code and copy to others\n          </Typography>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nexport default ImXExport","import React from 'react'\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport SwipeableViews from 'react-swipeable-views'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Box from '@material-ui/core/Box'\r\n\r\nimport PartyPanel from '../components/UI/PartyPanel'\r\nimport About from '../components/UI/About'\r\nimport ImXExport from '../components/UI/ImXExport'\r\n\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`full-width-tabpanel-${index}`}\r\n      aria-labelledby={`full-width-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `full-width-tab-${index}`,\r\n    'aria-controls': `full-width-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction Setting() {\r\n  const theme = useTheme();\r\n  const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      background: theme.palette.background.default,\r\n      height: 'inherit',\r\n    },\r\n    // background: {\r\n    //   position: 'absolute',\r\n    //   top: 0,\r\n    //   left: 0,\r\n    //   width: '100%',\r\n    //   height: '100%',\r\n    //   zIndex: 0,\r\n    //   background: theme.palette.background.default,\r\n    //   backgroundSize: 'cover',\r\n    //   backgroundPosition: 'center',\r\n    //   opacity: 1,\r\n    // }\r\n  }))\r\n  const classes = useStyles()\r\n  const [value, setValue] = React.useState(0)\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue)\r\n  };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index)\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* <div className={classes.background}> </div> */}\r\n      <AppBar position=\"sticky\" color=\"default\">\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n          aria-label=\"full width tabs example\"\r\n        >\r\n          <Tab label=\"General\" {...a11yProps(0)} />\r\n          <Tab label=\"Import/Export\" {...a11yProps(1)} />\r\n          <Tab label=\"About\" {...a11yProps(2)} />\r\n        </Tabs>\r\n      </AppBar>\r\n      <SwipeableViews\r\n        // axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\r\n        index={value}\r\n        onChangeIndex={handleChangeIndex}\r\n      >\r\n        <TabPanel value={value} index={0} dir={theme.direction}>\r\n          <PartyPanel />\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1} dir={theme.direction}>\r\n          <ImXExport />\r\n        </TabPanel>\r\n        <TabPanel value={value} index={2} dir={theme.direction}>\r\n          <About />\r\n        </TabPanel>\r\n      </SwipeableViews>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Setting","import {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\"\r\n\r\nimport Gaol from './features/gaol/Gaol'\r\nimport Setting from './pages/Setting'\r\n\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <>\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Gaol />\r\n          </Route>\r\n          <Route path=\"/settings\">\r\n            <Setting />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport gaolReducer from '../features/gaol/gaolSlice'\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    gaol: gaolReducer,\r\n  },\r\n})","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles'\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from './App'\r\nimport { store } from './app/store'\r\nimport './index.css'\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    type: 'dark',\r\n  },\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}